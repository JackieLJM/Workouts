<html>

<head>
    <title>倒计时测试</title>
    <script src="../../jquery.min.js" type="text/javascript"></script>
    <script language="JavaScript">
        $(document).ready(function () {
            clockon();
        });
        function clockon() {
            var now = new Date();
            var year = now.getFullYear(); //getFullYear getYear
            var month = now.getMonth();
            var date = now.getDate();
            var day = now.getDay();
            var hour = now.getHours();
            var minu = now.getMinutes();
            var sec = now.getSeconds();
            var week;
            month = month + 1;
            if (month < 10) { month = "0" + month; }
            if (date < 10) { date = "0" + date; }
            if (hour < 10) { hour = "0" + hour; }
            if (minu < 10) { minu = "0" + minu; }
            if (sec < 10) { sec = "0" + sec; }
            var arr_week = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
            week = arr_week[day];
            var time = "";
            time = year + "年" + month + "月" + date + "日" + " " + hour + ":" + minu + ":" + sec + " " + week;
            $("#bgclock").html(time);
            var timer = setTimeout("clockon()", 200);
        }
        var DifferHour = -1
        var DifferMinute = -1
        var DifferSecond = -1
        var Tday1 = new Date("Feb 11, 2013 00:00:00") //**倒计时时间-注意格式
        var daysms = 24 * 60 * 60 * 1000
        var hoursms = 60 * 60 * 1000
        var Secondms = 60 * 1000
        var microsecond = 1000
        function clock() {
            var time = new Date()
            var hour = time.getHours()
            var minute = time.getMinutes()
            var second = time.getSeconds()
            var timevalue = "" + ((hour > 12) ? hour - 12 : hour)
            timevalue += ((minute < 10) ? ":0" : ":") + minute
            timevalue += ((second < 10) ? ":0" : ":") + second
            timevalue += ((hour > 12) ? " PM" : " AM")
            var convertHour = DifferHour
            var convertMinute = DifferMinute
            var convertSecond = DifferSecond
            var Diffms = Tday1.getTime() - time.getTime()
            DifferHour = Math.floor(Diffms / daysms)
            Diffms -= DifferHour * daysms
            DifferMinute = Math.floor(Diffms / hoursms)
            Diffms -= DifferMinute * hoursms
            DifferSecond = Math.floor(Diffms / Secondms)
            Diffms -= DifferSecond * Secondms
            var dSecs = Math.floor(Diffms / microsecond)
            if (convertHour != DifferHour) document.formnow.dd.value = DifferHour
            if (convertMinute != DifferMinute) document.formnow.hh.value = DifferMinute
            if (convertSecond != DifferSecond) document.formnow.mm.value = DifferSecond
            document.formnow.ss.value = dSecs
            document.formnow.ss.value = dSecs
            setTimeout("clock()", 1000)
        }
    </script>
</head>

<body onload="clock();return true">
    <form name="formnow">
        <input name="dd" type="text" style="border:0;" size=2> 天
        <input name="hh" type="text" style="border:0;" size=2> 小时
        <input name="mm" type="text" style="border:0;" size=2> 分
        <input name="ss" type="text" style="border:0;" size=2> 秒
        <span id="bgclock" style="float:right;padding-right:10px; padding-top:2px;text: red "></span>
    </form>
</body>

</html>